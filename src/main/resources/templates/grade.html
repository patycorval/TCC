<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" th:href="@{/css/style.css}" />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display.swap");
      .btn-add {
        font-size: 1.2rem;
        padding: 0.1rem 0.5rem;
      }
      .celula-grade {
        min-height: 80px;
      }
    </style>
    <title>Grade de Horarios</title>
  </head>
  <body>
    <div th:replace="~{fragments/header :: header}"></div>
    <main class="container my-5">
      <h2 class="mb-4">Grade de Horários</h2>

      <div id="filtrosGrade" class="filtros-grade">
        <div class="form-group">
          <label for="curso">Curso:</label>
          <select id="curso" class="form-select">
            <option value="">Selecione um curso</option>
            <option
              th:each="c : ${cursos}"
              th:value="${c.id}"
              th:text="${c.sigla + ' - ' + c.periodo}"
              th:data-sigla="${c.sigla}"
              th:data-periodo="${c.periodo.toLowerCase()}"
            ></option>
          </select>
        </div>

        <div class="form-group">
          <label for="usuarioFiltro">Professor/Monitor:</label>
          <select id="usuarioFiltro" class="form-select">
            <option value="">Selecione um curso primeiro</option>
          </select>
        </div>

        <div class="form-group">
          <label for="periodo">Período:</label>
          <select id="periodo" class="form-select" disabled>
            <option value="matutino">Matutino</option>
            <option value="noturno">Noturno</option>
          </select>
        </div>

        <div class="form-group">
          <label for="semestre">Semestre:</label>
          <select id="semestre" class="form-select">
            <option value="1">1º</option>
            <option value="2">2º</option>
            <option value="3">3º</option>
            <option value="4">4º</option>
            <option value="5">5º</option>
            <option value="6">6º</option>
          </select>
        </div>
      </div>

      <div class="grade-tabela my-5">
        <div class="grade-header">
          <div class="horario-label">Horário</div>
          <div class="dia-label">Segunda</div>
          <div class="dia-label">Terça</div>
          <div class="dia-label">Quarta</div>
          <div class="dia-label">Quinta</div>
          <div class="dia-label">Sexta</div>
          <div class="dia-label">Sábado</div>
        </div>
        <div id="gradeBody" class="grade-body"></div>
      </div>
    </main>

    <div class="modal fade" id="modalAula" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modalAulaTitle">Adicionar Aula</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="formAula">
              <input type="hidden" id="modalDiaSemana" />
              <input type="hidden" id="modalHorario" />

              <div class="mb-3">
                <label for="modalUsuario" class="form-label"
                  >Professor/Monitor</label
                >
                <select id="modalUsuario" class="form-select" required>
                  <option value="">Selecione...</option>
                </select>
              </div>

              <div class="mb-3">
                <label for="modalSala" class="form-label"
                  >Sala/Laboratório</label
                >
                <select id="modalSala" class="form-select" required>
                  <option value="">Selecione a sala</option>
                  <option
                    th:each="sala : ${salas}"
                    th:value="${sala.id}"
                    th:text="${sala.getTipoSalaDisplayName() + ' ' + sala.numero}"
                  ></option>
                </select>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancelar
            </button>
            <button type="button" id="btnSalvarAula" class="btn btn-primary">
              Salvar Semestre
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <script th:src="@{/js/grade.js}"></script>
    <div th:replace="~{fragments/footer :: footer}"></div>
  </body>
</html>
